<!DOCTYPE html>
<html lang="zh-cn">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- 新 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet"
	href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">


<link rel="stylesheet" href="css/dashboard.css">

<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
<script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>

<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>

<!-- video.js -->
<link href="http://vjs.zencdn.net/5.8.8/video-js.css" rel="stylesheet">

<!-- voide.js -->
<script src="http://vjs.zencdn.net/5.8.8/video.js"></script>

<!-- voide.js hls. -->
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/4.0.2/videojs-contrib-hls.js"></script>

<!--hot key  -->
<link rel="stylesheet/less" type="text/css" href="css/videojs-playlist-ui.vertical.less" />
<script src="//cdn.sc.gl/videojs-hotkeys/latest/videojs.hotkeys.min.js"></script>
<script src="js/videojs-playlist.min.js"></script>
<script src="js/videojs-playlist-ui.test.js"></script>

<meta charset="UTF-8">
<title>电影小站</title>
</head>

<body>
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#navbar" aria-expanded="false"
					aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="">电影小站</a>
			</div>
			<div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav navbar-right">
					<li><a href="">Dashboard</a></li>
					<li><a href="">Settings</a></li>
				</ul>
				<form class="navbar-form navbar-right">
					<input type="text" class="form-control" placeholder="Search...">
				</form>
			</div>
		</div>
	</nav>

	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-3 col-md-2 sidebar">
				<ul class="nav nav-sidebar">
					<li class="active"><a href="">電影</a></li>
					<li id="video_name"></li>
				</ul>
			</div>
		</div>
	</div>


	<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
		<h1 class="page-header">電影</h1>
					<ol class="vjs-playlist"></ol>
		<div id="video_main">
			<video id="my-video" class="video-js" controls preload="auto"
				width="720" height="360" poster="png/MY_VIDEO_POSTER.png"
				data-setup='{"aspectRatio":"720:360"}'>
				<!-- <source id="my_video_sourse"
				src="http://cn-sdjn-cu-v-08.acgvideo.com/vg4/c/9f/12350455-1.flv?expires=1481893200&ssig=4b7g55wn2Fd9MlN_neMhVA&oi=1875266260&rate=2400000&d=310334"
				type='video/x-flv'> -->
				<p class="vjs-no-js">
					To view this video please enable JavaScript, and consider upgrading
					to a web browser that <a
						href="http://videojs.com/html5-video-support/" target="_blank">supports
						HTML5 video</a>
				</p>
			</video>

		</div>
	</div>

	<script>
		function video_click(uuid) {
			var time = new Date().getTime();
			var t_encode = time * 6 + 1991 + 327 + 511 + 2537;
			$.ajax({
				type : "get",
				url : "http://115.28.66.229/VideoUrlServlet",
				data : {
					"time" : time,
					"t_encode" : t_encode,
					"uuid" : uuid
				},
				async : false,
				dataType : "json",
				success : function(data) {
					//console.log(data[0]['url']);
					console.log("22222222222222");
					//getUrlFun(data[0]['url']);
					getUrlFun('http://www.bilibili.com/video/av7539260/');
				}
			});
		}

		function getUrlFun(url) {
			var time = new Date().getTime();
			var t_encode = time * 6 + 1991 + 327 + 511 + 2537;
			$.ajax({
				type : "get",
				url : "http://115.28.66.229/VideoRealUrlsServlet",
				data : {
					"time" : time,
					"t_encode" : t_encode,
					"url" : url
				},
				async : false,
				dataType : "text",
				success : function(data) {
					console.log("1111111111111111");
					console.log(data);

					/* var u="http://cn-sxty2-cu.acgvideo.com/vg7/c/63/12350455-1-hd.mp4?expires=1481893200&ssig=AhaHJU6xy6aY5hg2UuqCxA&oi=1875266260&nfa=jh1gYOK5yu5onKTDA7JgFw==&dynamic=1&d=1336876";

					var html_video='<video id="my-video" class="video-js" controls preload="auto"'+
						'width="720" height="360" poster="png/MY_VIDEO_POSTER.png"'+
							'data-setup={"aspectRatio":"720:360"}>'+
							'<source id="my_video_sourse"'+
								'src="'+u+'"'+
								'type="video/mp4">'+
							'<p class="vjs-no-js"></p></video>'
					
					$("#video_main").html(html_video); */

					//var myPlayer =  videojs("my-video");  //初始化视频
					//myPlayer.load(u);  //使video重新加载
				},
				error : function(data) {
					console.log("error---" + data.data);
					console.log(textStatus + "");
				}
			});
		}

		var time = new Date().getTime();
		var t_encode = time * 6 + 1991 + 327 + 511 + 2537;
		var html = ''

		$.ajax({
			type : "get",
			url : "http://115.28.66.229/VideoServlet",
			data : {
				"time" : time,
				"t_encode" : t_encode,
				"pageNo" : 0
			},
			async : false,
			dataType : "json",
			success : function(data) {
				for (var i = 0; i < data.length; i++) {
					var xx = data[i]['uuid']
					//data[i]['uuid']
					html += '<a href=javascript:video_click("' + xx + '");>'
							+ data[i]['name'] + '</a>'
				}
				$('#video_name').html(html)
			}
		});
		/* hot key */
		videojs('my-video').ready(function() {
			this.hotkeys({
				volumeStep : 0.1,
				seekStep : 5,
				enableModifiersForNumbers : false
			});
		});
		
		/*  */
		var player = videojs('my-video');
		player.playlist([{
			name: 'Disney\'s Oceans 1',
		      description: 'Explore the depths of our planet\'s oceans. ' +
		        'Experience the stories that connect their world to ours. ' +
		        'Lorem ipsum dolor sit amet, consectetur adipiscing elit, ' +
		        'sed do eiusmod tempor incididunt ut labore et dolore magna ' +
		        'aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco ' +
		        'laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure ' +
		        'dolor in reprehenderit in voluptate velit esse cillum dolore eu ' +
		        'fugiat nulla pariatur. Excepteur sint occaecat cupidatat non ' +
		        'proident, sunt in culpa qui officia deserunt mollit anim id est ' +
		        'laborum.',
		      duration: 45,
		  sources: [{
		    src: 'http://cn-sdjn-cu-v-01.acgvideo.com/vg4/c/53/12363249-1.flv?expires=1481907900&ssig=bJsbVXMHmQpZ3VjCGEJy8g&oi=1875266260&nfa=jh1gYOK5yu5onKTDA7JgFw==&dynamic=1&d=300328',
		    type: 'video/x-flv'
		  }],
		}, {
			name: 'Disney\'s Oceans 1',
		      description: 'Explore the depths of our planet\'s oceans. ' +
		        'Experience the stories that connect their world to ours. ' +
		        'Lorem ipsum dolor sit amet, consectetur adipiscing elit, ' +
		        'sed do eiusmod tempor incididunt ut labore et dolore magna ' +
		        'aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco ' +
		        'laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure ' +
		        'dolor in reprehenderit in voluptate velit esse cillum dolore eu ' +
		        'fugiat nulla pariatur. Excepteur sint occaecat cupidatat non ' +
		        'proident, sunt in culpa qui officia deserunt mollit anim id est ' +
		        'laborum.',
		      duration: 45,
		  sources: [{
		    src: 'http://cn-sdjn-cu-v-02.acgvideo.com/vg2/9/ee/12363249-1-hd.mp4?expires=1481907900&ssig=7WgaWBNg6or3bRZTB6arrg&oi=1875266260&rate=2400000&d=1106183',
		    type: 'video/mp4'
		  }],
		}]);
		// Play through the playlist automatically.
		//player.playlist.autoadvance(0);
		player.playlistUi();
		
	</script>
</body>
</html>